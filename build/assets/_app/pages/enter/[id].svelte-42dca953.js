import{S as a,i as s,s as e,e as t,c,a as o,d as n,f as r,V as i,W as l,k as d,t as f,n as u,g as h,b as p,E as v,F as m,R as x,K as g,X as E,A as I}from"../../chunks/vendor-7fff300c.js";function k(a){let s,e,d,f;return{c(){s=t("video")},l(a){s=c(a,"VIDEO",{}),o(s).forEach(n)},m(t,c){r(t,s,c),d||(f=i(e=P.call(null,s,a[3])),d=!0)},p(a,s){e&&l(e.update)&&8&s&&e.update.call(null,a[3])},d(a){a&&n(s),d=!1,f()}}}function w(a){let s,e,i,l,I,w,y,P,b,N,V,j,A,D,T,M,O,S,U,F,R,$=a[3]&&k(a);return{c(){$&&$.c(),s=d(),e=t("div"),i=t("span"),l=t("i"),I=d(),w=t("i"),y=d(),P=t("div"),b=t("span"),N=t("i"),V=d(),j=t("i"),A=d(),D=t("form"),T=t("input"),M=d(),O=t("input"),S=f(" Enter as admin"),this.h()},l(a){$&&$.l(a),s=u(a),e=c(a,"DIV",{});var t=o(e);i=c(t,"SPAN",{class:!0});var r=o(i);l=c(r,"I",{class:!0}),o(l).forEach(n),I=u(r),w=c(r,"I",{class:!0}),o(w).forEach(n),r.forEach(n),t.forEach(n),y=u(a),P=c(a,"DIV",{class:!0});var d=o(P);b=c(d,"SPAN",{class:!0});var f=o(b);N=c(f,"I",{class:!0}),o(N).forEach(n),V=u(f),j=c(f,"I",{class:!0}),o(j).forEach(n),f.forEach(n),d.forEach(n),A=u(a),D=c(a,"FORM",{action:!0});var p=o(D);T=c(p,"INPUT",{type:!0,placeholder:!0,name:!0,class:!0}),M=u(p),O=c(p,"INPUT",{type:!0,name:!0,class:!0}),S=h(p," Enter as admin"),p.forEach(n),this.h()},h(){p(l,"class","fas fa-circle fa-stack-2x"),v(l,"text-green-600",a[1]),v(l,"text-red-600",!a[1]),p(w,"class","fas fa-stack-1x fa-inverse"),v(w,"fa-microphone",a[1]),v(w,"fa-microphone-slash",!a[1]),p(i,"class","fa-stack fa-lg rounded-full shadow-xl"),p(N,"class","fas fa-circle fa-stack-2x "),v(N,"text-green-600",a[2]),v(N,"text-red-600",!a[2]),p(j,"class","fas fa-video fa-stack-1x fa-inverse"),p(b,"class","fa-stack fa-lg rounded-full shadow-xl"),p(P,"class","md:ml-5"),p(T,"type","password"),p(T,"placeholder","Passcode"),p(T,"name","passcode"),T.required=!0,p(T,"class","svelte-tjt368"),p(O,"type","checkbox"),p(O,"name","admin"),p(O,"class","svelte-tjt368"),p(D,"action",U="/video/"+a[0])},m(t,c){$&&$.m(t,c),r(t,s,c),r(t,e,c),m(e,i),m(i,l),m(i,I),m(i,w),r(t,y,c),r(t,P,c),m(P,b),m(b,N),m(b,V),m(b,j),r(t,A,c),r(t,D,c),m(D,T),m(D,M),m(D,O),m(D,S),F||(R=[x(e,"click",a[4]),x(P,"click",a[5])],F=!0)},p(a,[e]){a[3]?$?$.p(a,e):($=k(a),$.c(),$.m(s.parentNode,s)):$&&($.d(1),$=null),2&e&&v(l,"text-green-600",a[1]),2&e&&v(l,"text-red-600",!a[1]),2&e&&v(w,"fa-microphone",a[1]),2&e&&v(w,"fa-microphone-slash",!a[1]),4&e&&v(N,"text-green-600",a[2]),4&e&&v(N,"text-red-600",!a[2]),1&e&&U!==(U="/video/"+a[0])&&p(D,"action",U)},i:g,o:g,d(a){$&&$.d(a),a&&n(s),a&&n(e),a&&n(y),a&&n(P),a&&n(A),a&&n(D),F=!1,E(R)}}}const y=({page:a})=>{const{params:s}=a;return{status:200,props:{roomId:s.id}}};function P(a,s){return a.srcObject=s,{update(s){P(a,s)}}}function b(a,s,e){var t=this&&this.__awaiter||function(a,s,e,t){return new(e||(e=Promise))((function(c,o){function n(a){try{i(t.next(a))}catch(s){o(s)}}function r(a){try{i(t.throw(a))}catch(s){o(s)}}function i(a){var s;a.done?c(a.value):(s=a.value,s instanceof e?s:new e((function(a){a(s)}))).then(n,r)}i((t=t.apply(a,s||[])).next())}))};let c,{roomId:o}=s,n=!1,r=!1;return I((()=>t(void 0,void 0,void 0,(function*(){})))),I((()=>{navigator.mediaDevices.getUserMedia({video:!0,audio:!0}).then((a=>{e(3,c=a)}))})),a.$$set=a=>{"roomId"in a&&e(0,o=a.roomId)},[o,n,r,c,function(a,s=!n){return t(this,void 0,void 0,(function*(){e(1,n=s),console.log("toggleMic",n),c.getAudioTracks().forEach((a=>a.enabled=n))}))},function(a,s=!r){return t(this,void 0,void 0,(function*(){e(2,r=s),console.log("toggleCam",r),c.getVideoTracks().forEach((a=>a.enabled=r))}))}]}export default class extends a{constructor(a){super(),s(this,a,b,w,e,{roomId:0})}}export{y as load};
