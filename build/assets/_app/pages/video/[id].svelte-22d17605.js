import{S as a,i as s,s as e,e as t,t as c,k as l,c as r,a as o,d as n,g as i,n as f,b as d,f as u,F as h,O as m,K as p,R as v,T as x,U as g,V as E,E as b,W as I,X as w,j as k,m as y,o as D,x as V,u as j,v as A,l as P,Y as $,Z as N,_ as S,$ as T,M as O,a0 as R,w as H,a1 as M,a2 as F,A as C,a3 as L,a4 as U,a5 as q,r as W,a6 as Y,h as _}from"../../chunks/vendor-b7d06f77.js";function z(a){let s,e,g,b,I,w,k,y,D,V,j,A,P,$,N,S;return{c(){s=t("div"),e=t("h1"),g=t("i"),b=c(" Prayer Requests"),I=l(),w=t("div"),k=l(),y=t("form"),D=t("input"),V=l(),j=t("button"),A=t("i"),this.h()},l(a){s=r(a,"DIV",{class:!0});var t=o(s);e=r(t,"H1",{class:!0});var c=o(e);g=r(c,"I",{class:!0}),o(g).forEach(n),b=i(c," Prayer Requests"),c.forEach(n),I=f(t),w=r(t,"DIV",{class:!0}),o(w).forEach(n),k=f(t),y=r(t,"FORM",{action:!0,class:!0});var l=o(y);D=r(l,"INPUT",{type:!0,placeholder:!0,class:!0}),V=f(l),j=r(l,"BUTTON",{class:!0});var d=o(j);A=r(d,"I",{class:!0}),o(A).forEach(n),d.forEach(n),l.forEach(n),t.forEach(n),this.h()},h(){d(g,"class","fas fa-arrow-left mr-6"),d(e,"class","text-2xl"),d(w,"class","flex-auto"),d(D,"type","text"),d(D,"placeholder","Your request"),d(D,"class","focus:border-black outline-none border border-r-0 p-2 flex-auto"),d(A,"class","fas fa-arrow-up"),d(j,"class","btn"),d(y,"action",""),d(y,"class","flex"),d(s,"class","fixed w-full md:w-3/12  bg-white top-0 bottom-0 left-0 p-10 flex flex-col")},m(t,c){u(t,s,c),h(s,e),h(e,g),h(e,b),h(s,I),h(s,w),h(s,k),h(s,y),h(y,D),h(y,V),h(y,j),h(j,A),$=!0,N||(S=m(g,"click",a[1]),N=!0)},p:p,i(a){$||(v((()=>{P||(P=x(s,E,{duration:1e3,x:0},!0)),P.run(1)})),$=!0)},o(a){P||(P=x(s,E,{duration:1e3,x:0},!1)),P.run(0),$=!1},d(a){a&&n(s),a&&P&&P.end(),N=!1,S()}}}function B(a){const s=g();return[s,()=>s("visible",!1)]}class Q extends a{constructor(a){super(),s(this,a,B,z,e,{})}}const{document:K}=L;function X(a,s,e){const t=a.slice();return t[17]=s[e].id,t[18]=s[e].stream,t[20]=e,t}function Z(a){let s,e,c,l;return{c(){s=t("video"),this.h()},l(a){s=r(a,"VIDEO",{class:!0}),o(s).forEach(n),this.h()},h(){s.autoplay=!0,d(s,"class","full-video svelte-13g81ul")},m(t,r){u(t,s,r),c||(l=S(e=ca.call(null,s,a[18])),c=!0)},p(s,t){a=s,e&&R(e.update)&&1&t&&e.update.call(null,a[18])},d(a){a&&n(s),c=!1,l()}}}function G(a){let s,e,m,p,v,x,g,E=a[17]+"";return{c(){s=t("h1"),e=c(E),m=l(),p=t("video"),this.h()},l(a){s=r(a,"H1",{class:!0});var t=o(s);e=i(t,E),t.forEach(n),m=f(a),p=r(a,"VIDEO",{class:!0}),o(p).forEach(n),this.h()},h(){d(s,"class","text-3xl my-4"),p.autoplay=!0,d(p,"class","thumbnail-video svelte-13g81ul")},m(t,c){u(t,s,c),h(s,e),u(t,m,c),u(t,p,c),x||(g=S(v=ca.call(null,p,a[18])),x=!0)},p(s,t){a=s,1&t&&E!==(E=a[17]+"")&&_(e,E),v&&R(v.update)&&1&t&&v.update.call(null,a[18])},d(a){a&&n(s),a&&n(m),a&&n(p),x=!1,g()}}}function J(a){let s,e,m,p,v,x,g,E=a[17]+"";return{c(){s=t("h1"),e=c(E),m=l(),p=t("span"),v=t("i"),x=l(),g=t("i"),this.h()},l(a){s=r(a,"H1",{class:!0});var t=o(s);e=i(t,E),t.forEach(n),m=f(a),p=r(a,"SPAN",{class:!0});var c=o(p);v=r(c,"I",{class:!0}),o(v).forEach(n),x=f(c),g=r(c,"I",{class:!0}),o(g).forEach(n),c.forEach(n),this.h()},h(){d(s,"class","text-3xl my-4"),d(v,"class","fas fa-circle text-green-500 fa-stack-2x "),d(g,"class","fas fa-chair fa-stack-1x text-white"),d(p,"class","fa-stack fa-2x")},m(a,t){u(a,s,t),h(s,e),u(a,m,t),u(a,p,t),h(p,v),h(p,x),h(p,g)},p(a,s){1&s&&E!==(E=a[17]+"")&&_(e,E)},d(a){a&&n(s),a&&n(m),a&&n(p)}}}function aa(a,s){let e,c,i,v,x,g=p;function E(a,s){return 0==a[4]?J:1==a[4]?G:Z}let k=E(s),y=k(s);return{key:a,first:null,c(){e=t("div"),y.c(),c=l(),this.h()},l(a){e=r(a,"DIV",{class:!0});var s=o(e);y.l(s),c=f(s),s.forEach(n),this.h()},h(){d(e,"class","border flex flex-col justify-center items-center rounded-xl bg-white"),b(e,"py-6",2!==s[4]),this.first=e},m(a,t){u(a,e,t),y.m(e,null),h(e,c),v||(x=m(e,"dblclick",s[5]),v=!0)},p(a,t){k===(k=E(s=a))&&y?y.p(s,t):(y.d(1),y=k(s),y&&(y.c(),y.m(e,c))),16&t&&b(e,"py-6",2!==s[4])},r(){i=e.getBoundingClientRect()},f(){I(e),g()},a(){g(),g=w(e,i,U,{duration:700})},d(a){a&&n(e),y.d(),v=!1,x()}}}function sa(a){let s,e;return s=new Q({}),s.$on("visible",a[12]),{c(){k(s.$$.fragment)},l(a){y(s.$$.fragment,a)},m(a,t){D(s,a,t),e=!0},p:p,i(a){e||(V(s.$$.fragment,a),e=!0)},o(a){j(s.$$.fragment,a),e=!1},d(a){A(s,a)}}}function ea(a){let s,e,p,v,x,g,E,I,w,k,y,D,A,F,C,L,U,Y,_,z,B,Q,Z,G,J,ea,ta,ca,la,ra,oa,na,ia,fa,da,ua,ha,ma,pa,va,xa,ga,Ea,ba,Ia,wa,ka,ya,Da,Va,ja,Aa,Pa,$a,Na,Sa=[],Ta=new Map,Oa=a[0];const Ra=a=>a[17];for(let t=0;t<Oa.length;t+=1){let s=X(a,Oa,t),e=Ra(s);Ta.set(e,Sa[t]=aa(e,s))}let Ha=a[1]&&sa(a);return{c(){s=t("script"),p=l(),v=t("div"),x=t("div"),g=t("iframe"),I=l(),w=t("div"),k=t("h1"),y=t("i"),D=l(),A=t("h1"),F=c("Name"),C=l(),L=t("a"),U=c("Subscribe "),Y=t("span"),_=c("33"),z=l(),B=t("a"),Q=c("Likes"),Z=l(),G=t("div");for(let a=0;a<Sa.length;a+=1)Sa[a].c();ea=l(),ta=t("div"),ca=t("div"),la=t("span"),ra=t("i"),oa=l(),na=t("i"),ia=l(),fa=t("div"),da=t("span"),ua=t("i"),ha=l(),ma=t("i"),pa=l(),va=t("div"),xa=t("span"),ga=t("i"),Ea=l(),ba=t("i"),Ia=l(),wa=t("div"),ka=t("span"),ya=t("i"),Da=l(),Va=t("i"),ja=l(),Ha&&Ha.c(),Aa=P(),this.h()},l(a){const e=$('[data-svelte="svelte-4n7nzi"]',K.head);s=r(e,"SCRIPT",{src:!0}),o(s).forEach(n),e.forEach(n),p=f(a),v=r(a,"DIV",{class:!0});var t=o(v);x=r(t,"DIV",{class:!0});var c=o(x);g=r(c,"IFRAME",{class:!0,src:!0,title:!0,frameborder:!0,allow:!0}),o(g).forEach(n),I=f(c),w=r(c,"DIV",{class:!0});var l=o(w);k=r(l,"H1",{class:!0});var d=o(k);y=r(d,"I",{class:!0}),o(y).forEach(n),d.forEach(n),D=f(l),A=r(l,"H1",{class:!0});var u=o(A);F=i(u,"Name"),u.forEach(n),C=f(l),L=r(l,"A",{href:!0,class:!0});var h=o(L);U=i(h,"Subscribe "),Y=r(h,"SPAN",{class:!0});var m=o(Y);_=i(m,"33"),m.forEach(n),h.forEach(n),z=f(l),B=r(l,"A",{href:!0});var E=o(B);Q=i(E,"Likes"),E.forEach(n),l.forEach(n),c.forEach(n),Z=f(t),G=r(t,"DIV",{class:!0});var b=o(G);for(let s=0;s<Sa.length;s+=1)Sa[s].l(b);b.forEach(n),t.forEach(n),ea=f(a),ta=r(a,"DIV",{class:!0,id:!0});var V=o(ta);ca=r(V,"DIV",{});var j=o(ca);la=r(j,"SPAN",{class:!0});var N=o(la);ra=r(N,"I",{class:!0}),o(ra).forEach(n),oa=f(N),na=r(N,"I",{class:!0}),o(na).forEach(n),N.forEach(n),j.forEach(n),ia=f(V),fa=r(V,"DIV",{class:!0});var S=o(fa);da=r(S,"SPAN",{class:!0});var T=o(da);ua=r(T,"I",{class:!0}),o(ua).forEach(n),ha=f(T),ma=r(T,"I",{class:!0}),o(ma).forEach(n),T.forEach(n),S.forEach(n),pa=f(V),va=r(V,"DIV",{class:!0});var O=o(va);xa=r(O,"SPAN",{class:!0});var R=o(xa);ga=r(R,"I",{class:!0}),o(ga).forEach(n),Ea=f(R),ba=r(R,"I",{class:!0}),o(ba).forEach(n),R.forEach(n),O.forEach(n),Ia=f(V),wa=r(V,"DIV",{class:!0});var H=o(wa);ka=r(H,"SPAN",{class:!0});var M=o(ka);ya=r(M,"I",{class:!0}),o(ya).forEach(n),Da=f(M),Va=r(M,"I",{class:!0}),o(Va).forEach(n),M.forEach(n),H.forEach(n),V.forEach(n),ja=f(a),Ha&&Ha.l(a),Aa=P(),this.h()},h(){K.title="VIDEO CHAT",N(s.src,e="https://unpkg.com/peerjs@1.3.1/dist/peerjs.min.js")||d(s,"src","https://unpkg.com/peerjs@1.3.1/dist/peerjs.min.js"),s.defer=!0,d(g,"class","md:w-8/12 svelte-13g81ul"),N(g.src,E="https://www.youtube.com/embed/pF0WLHERdOQ")||d(g,"src","https://www.youtube.com/embed/pF0WLHERdOQ"),d(g,"title","YouTube video player"),d(g,"frameborder","0"),d(g,"allow","accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture"),g.allowFullscreen=!0,d(y,"class","fab fa-youtube fa-3x text-red-700"),d(k,"class","text-center"),d(A,"class","text-center"),d(Y,"class","text-right"),d(L,"href",""),d(L,"class"," flex flex-row justify-between"),d(B,"href",""),d(w,"class","flex-1 p-10 flex flex-col items-stretch justify-center gap-6"),d(x,"class","md:flex flex-wrap mb-3"),d(G,"class","grid grid-cols-2 gap-4 md:grid-cols-4 md:gap-4 md:gap-y-12"),d(v,"class","container mx-auto p-2"),d(ra,"class","fas fa-circle fa-stack-2x"),b(ra,"text-green-600",a[2]),b(ra,"text-red-600",!a[2]),d(na,"class","fas fa-stack-1x fa-inverse"),b(na,"fa-microphone",a[2]),b(na,"fa-microphone-slash",!a[2]),d(la,"class","fa-stack fa-lg rounded-full shadow-xl"),d(ua,"class","fas fa-circle fa-stack-2x "),b(ua,"text-green-600",a[3]),b(ua,"text-red-600",!a[3]),d(ma,"class","fas fa-video fa-stack-1x fa-inverse"),d(da,"class","fa-stack fa-lg rounded-full shadow-xl"),d(fa,"class","md:ml-5"),d(ga,"class","fas fa-circle fa-stack-2x text-indigo-600"),d(ba,"class","fas fa-praying-hands fa-stack-1x fa-inverse"),d(xa,"class","fa-stack fa-lg rounded-full shadow-xl"),d(va,"class","md:ml-5"),d(ya,"class","fas fa-circle fa-stack-2x text-purple-700"),d(Va,"class","fas fa-chair fa-stack-1x fa-inverse"),d(ka,"class","fa-stack fa-lg rounded-full shadow-xl"),d(wa,"class","md:ml-5"),d(ta,"class","fixed md:left-0 right-0 bottom-16 md:bottom-5 container mx-auto flex justify-center text-xl flex-row "),d(ta,"id","controls")},m(e,t){h(K.head,s),u(e,p,t),u(e,v,t),h(v,x),h(x,g),h(x,I),h(x,w),h(w,k),h(k,y),h(w,D),h(w,A),h(A,F),h(w,C),h(w,L),h(L,U),h(L,Y),h(Y,_),h(w,z),h(w,B),h(B,Q),h(v,Z),h(v,G);for(let a=0;a<Sa.length;a+=1)Sa[a].m(G,null);u(e,ea,t),u(e,ta,t),h(ta,ca),h(ca,la),h(la,ra),h(la,oa),h(la,na),h(ta,ia),h(ta,fa),h(fa,da),h(da,ua),h(da,ha),h(da,ma),h(ta,pa),h(ta,va),h(va,xa),h(xa,ga),h(xa,Ea),h(xa,ba),h(ta,Ia),h(ta,wa),h(wa,ka),h(ka,ya),h(ka,Da),h(ka,Va),u(e,ja,t),Ha&&Ha.m(e,t),u(e,Aa,t),Pa=!0,$a||(Na=[S(J=T.call(null,G,{items:a[0],flipDurationMs:700})),m(G,"consider",a[6]),m(G,"finalize",a[6]),m(ca,"click",a[7]),m(fa,"click",a[8]),m(va,"click",a[10]),m(wa,"click",a[11])],$a=!0)},p(a,[s]){if(49&s){Oa=a[0];for(let a=0;a<Sa.length;a+=1)Sa[a].r();Sa=O(Sa,s,Ra,1,a,Oa,Ta,G,q,aa,null,X);for(let a=0;a<Sa.length;a+=1)Sa[a].a()}J&&R(J.update)&&1&s&&J.update.call(null,{items:a[0],flipDurationMs:700}),4&s&&b(ra,"text-green-600",a[2]),4&s&&b(ra,"text-red-600",!a[2]),4&s&&b(na,"fa-microphone",a[2]),4&s&&b(na,"fa-microphone-slash",!a[2]),8&s&&b(ua,"text-green-600",a[3]),8&s&&b(ua,"text-red-600",!a[3]),a[1]?Ha?(Ha.p(a,s),2&s&&V(Ha,1)):(Ha=sa(a),Ha.c(),V(Ha,1),Ha.m(Aa.parentNode,Aa)):Ha&&(W(),j(Ha,1,1,(()=>{Ha=null})),H())},i(a){Pa||(V(Ha),Pa=!0)},o(a){j(Ha),Pa=!1},d(a){n(s),a&&n(p),a&&n(v);for(let s=0;s<Sa.length;s+=1)Sa[s].d();a&&n(ea),a&&n(ta),a&&n(ja),Ha&&Ha.d(a),a&&n(Aa),$a=!1,M(Na)}}}const ta=({page:a})=>{const{params:s}=a;return{status:200,props:{roomId:s.id}}};function ca(a,s){return(null==s?void 0:s.getTracks().length)&&(a.srcObject=s),a.onloadedmetadata=function(s){a.play()},{update(s){ca(a,s)}}}function la(a,s,e){var t=this&&this.__awaiter||function(a,s,e,t){return new(e||(e=Promise))((function(c,l){function r(a){try{n(t.next(a))}catch(s){l(s)}}function o(a){try{n(t.throw(a))}catch(s){l(s)}}function n(a){var s;a.done?c(a.value):(s=a.value,s instanceof e?s:new e((function(a){a(s)}))).then(r,o)}n((t=t.apply(a,s||[])).next())}))};let c=[{id:"dd",name:"",stream:void 0}];F("id");let l=!1,r=!1,o=!1,{roomId:n}=s,i=0;function f(a,s=!r){return t(this,void 0,void 0,(function*(){e(2,r=s),console.log("toggleMic",r),c[0].stream.getAudioTracks().forEach((a=>a.enabled=r))}))}function d(a,s=!o){return t(this,void 0,void 0,(function*(){e(3,o=s),console.log("toggleCam",o),c[0].stream.getVideoTracks().forEach((a=>a.enabled=o))}))}function u(a,s){return e(0,c=[...c,{name:"",stream:a,id:s}]),c.length-1}C((()=>t(void 0,void 0,void 0,(function*(){localStorage.debug="*";const a=yield function(){return t(this,void 0,void 0,(function*(){return yield navigator.mediaDevices.getUserMedia({video:!0,audio:!0})}))}();e(0,c[0].stream=a,c),d(0,!1),f(0,!1);const s=Y("/");console.log("This is not a peer");const l=new Peer(void 0,{host:"/",port:9e3});l.on("connection",(()=>console.log("connected"))),d(0,!1),f(0,!1),console.log(Y),l.on("open",(a=>{s.emit("join-room",n,a)})),s.on("user-connected",(s=>{!function(a,s,e){const t=a.call(s,e);let l;t.on("stream",(a=>{l=u(a,s)})),t.on("close",(()=>c.splice(l,1)))}(l,s,a)})),l.on("call",(s=>{s.answer(a),document.createElement("video"),s.on("stream",(a=>{u(a,"22")}))}))}))));return a.$$set=a=>{"roomId"in a&&e(9,n=a.roomId)},[c,l,r,o,i,function(){e(4,2===i?i-=1:i+=1)},function(a){e(0,c=a.detail.items)},f,d,n,()=>e(1,l=!l),()=>{e(4,i=0),e(2,r=!1),e(3,o=!1)},()=>e(1,l=!1)]}export default class extends a{constructor(a){super(),s(this,a,la,ea,e,{roomId:9})}}export{ta as load};
